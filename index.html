<!DOCTYPE html>
<html lang="lv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Līzinga nodošana / Leasing Transfer</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
<header>
    <span class="title"></span>
    <div class="lang-switcher">
        <button type="button" class="active" onclick="switchLang('lv')" id="btn-lv">LV</button>|
        <button type="button" onclick="switchLang('ru')" id="btn-ru">RU</button>|
        <button type="button" onclick="switchLang('en')" id="btn-en">ENG</button>
    </div>
</header>
<main>
    <div class="fancy-glass">
      <!-- Step 1: Līzinga tips -->
      <div class="glass-inner step active" id="step-choose">
          <h1 class="choose-title"></h1>
          <p class="choose-desc"></p>
          <button class="choose-btn" onclick="chooseType('finanses')"><span class="choose-btn-fin"></span></button>
          <button class="choose-btn" onclick="chooseType('operativais')"><span class="choose-btn-op"></span></button>
      </div>
      <!-- Step 2: Forma -->
      <div class="glass-inner step" id="step-form">
          <h1 class="form-title"></h1>
          <form id="leasing-form" onsubmit="submitForm(event)">
              <label for="name" class="form-name-label"></label>
              <input type="text" id="name" name="name" required>
              <label for="phone" class="form-phone-label"></label>
              <input type="tel" id="phone" name="phone" required>
              <label for="email" class="form-email-label"></label>
              <input type="email" id="email" name="email" required>
              <label for="vin" class="form-vin-label"></label>
              <input type="text" id="vin" name="vin" required>
              <label for="payment" class="form-payment-label"></label>
              <input type="number" id="payment" name="payment" min="1" required>
              <label for="months" class="form-months-label"></label>
              <input type="number" id="months" name="months" min="1" max="120" required>
              <label for="total_sum" class="form-total-label"></label>
              <input type="number" id="total_sum" name="total_sum" min="1" required>
              <div id="operativais-fields" style="display:none;">
                  <label for="residual_value" class="form-residual-label"></label>
                  <input type="number" id="residual_value" name="residual_value" min="0" step="any">
              </div>
              <button type="submit" class="form-btn"><span class="form-submit-btn"></span></button>
          </form>
          <a class="whatsapp-link" href="https://wa.me/37126355911" target="_blank"><span class="form-wa-link"></span></a>
      </div>
      <!-- Step 3: Paldies -->
      <div class="glass-inner step centered" id="step-success">
          <h1 class="success-title"></h1>
          <p class="success-desc"></p>
          <a class="whatsapp-link" href="https://wa.me/37126355911" target="_blank"><span class="success-wa-link"></span></a>
      </div>
    </div>
</main>
<script>
const translations = {
    lv: {
        title: "Līzinga saistību nodošanas serviss",
        choose_title: "Automobiļa līzinga nodošana",
        choose_desc: "Šeit Tu vari nodot saistības par savas automašīnas līzinga maksājumiem.",
        choose_btn_fin: "Finanšu līzings",
        choose_btn_op: "Operatīvais līzings",
        form_title: "Pieteikuma forma",
        form_name_label: "Vārds, Uzvārds",
        form_phone_label: "Tālruņa numurs",
        form_email_label: "E-pasts",
        form_vin_label: "VIN numurs vai reģistrācijas numurs",
        form_payment_label: "Ikmēneša maksājums (€)",
        form_months_label: "Atlikušo mēnešu skaits",
        form_total_label: "Atlikusī līguma summa (€)",
        form_residual_label: "Atlikusī vērtība līguma beigās (€)",
        form_submit_btn: "Iesniegt",
        form_wa_link: "Sazinies ar mums WhatsApp",
        success_title: "Paldies!",
        success_desc: "Pieteikums veiksmīgi iesniegts.",
        success_wa_link: "Jautājumi? Raksti WhatsApp"
    },
    ru: {
        title: "Сервис передачи лизинговых обязательств",
        choose_title: "Передача автолизинга",
        choose_desc: "Здесь вы можете передать обязательства по оплате авто в лизинг.",
        choose_btn_fin: "Финансовый лизинг",
        choose_btn_op: "Оперативный лизинг",
        form_title: "Форма заявки",
        form_name_label: "Имя, Фамилия",
        form_phone_label: "Телефон",
        form_email_label: "E-mail",
        form_vin_label: "VIN или номер регистрации",
        form_payment_label: "Ежемесячный платеж (€)",
        form_months_label: "Оставшееся кол-во месяцев",
        form_total_label: "Оставшаяся сумма по договору (€)",
        form_residual_label: "Остаточная стоимость в конце договора (€)",
        form_submit_btn: "Отправить",
        form_wa_link: "Связаться с нами в WhatsApp",
        success_title: "Спасибо!",
        success_desc: "Заявка успешно отправлена.",
        success_wa_link: "Вопросы? Напишите WhatsApp"
    },
    en: {
        title: "Leasing Transfer Service",
        choose_title: "Car Leasing Transfer",
        choose_desc: "Here you can transfer your car leasing payment obligations.",
        choose_btn_fin: "Financial Leasing",
        choose_btn_op: "Operational Leasing",
        form_title: "Application form",
        form_name_label: "Name, Surname",
        form_phone_label: "Phone number",
        form_email_label: "Email",
        form_vin_label: "VIN number or registration number",
        form_payment_label: "Monthly payment (€)",
        form_months_label: "Remaining months",
        form_total_label: "Remaining contract amount (€)",
        form_residual_label: "Residual value at contract end (€)",
        form_submit_btn: "Submit",
        form_wa_link: "Contact us on WhatsApp",
        success_title: "Thank you!",
        success_desc: "The application was successfully submitted.",
        success_wa_link: "Questions? Write on WhatsApp"
    }
};
let currentLang = "lv";
let leasingType = '';

function updateTexts() {
    const t = translations[currentLang];
    document.querySelector(".title").textContent = t.title;
    document.querySelector(".choose-title").textContent = t.choose_title;
    document.querySelector(".choose-desc").textContent = t.choose_desc;
    document.querySelector(".choose-btn-fin").textContent = t.choose_btn_fin;
    document.querySelector(".choose-btn-op").textContent = t.choose_btn_op;
    document.querySelector(".form-title").textContent = t.form_title;
    document.querySelector(".form-name-label").textContent = t.form_name_label;
    document.querySelector(".form-phone-label").textContent = t.form_phone_label;
    document.querySelector(".form-email-label").textContent = t.form_email_label;
    document.querySelector(".form-vin-label").textContent = t.form_vin_label;
    document.querySelector(".form-payment-label").textContent = t.form_payment_label;
    document.querySelector(".form-months-label").textContent = t.form_months_label;
    document.querySelector(".form-total-label").textContent = t.form_total_label;
    document.querySelector(".form-residual-label").textContent = t.form_residual_label;
    document.querySelector(".form-submit-btn").textContent = t.form_submit_btn;
    document.querySelector(".form-wa-link").textContent = t.form_wa_link;
    document.querySelector(".success-title").textContent = t.success_title;
    document.querySelector(".success-desc").textContent = t.success_desc;
    document.querySelector(".success-wa-link").textContent = t.success_wa_link;

    document.getElementById("btn-lv").classList.toggle("active", currentLang === "lv");
    document.getElementById("btn-ru").classList.toggle("active", currentLang === "ru");
    document.getElementById("btn-en").classList.toggle("active", currentLang === "en");
}

function switchLang(lang) {
    currentLang = lang;
    updateTexts();
}

function showStep(id) {
    document.querySelectorAll('.step').forEach(el => el.classList.remove('active'));
    document.getElementById(id).classList.add('active');
}

function chooseType(type) {
    leasingType = type;
    showStep('step-form');
    document.getElementById('operativais-fields').style.display = (leasingType === 'operativais') ? '' : 'none';
}
function submitForm(e) {
    e.preventDefault();
    const data = {
        name: document.getElementById('name').value,
        phone: document.getElementById('phone').value,
        email: document.getElementById('email').value,
        vin: document.getElementById('vin').value,
        payment: parseFloat(document.getElementById('payment').value) || 0,
        months: parseInt(document.getElementById('months').value) || 0,
        total_sum: parseFloat(document.getElementById('total_sum').value) || 0,
        residual_value: parseFloat(document.getElementById('residual_value').value) || 0,
        leasing_type: leasingType
    };
    fetch('https://odoo.bidsolana.xyz/leasing_cars/submit_application', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({params: data})
    }).then(r => {
        if (r.ok) showStep('step-success');
        else alert('Kļūda, dati netika nosūtīti!');
    }).catch(() => alert('Neizdevās savienoties ar serveri!'));
}

document.addEventListener("DOMContentLoaded", updateTexts);
</script>
</body>
</html>





